<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lec.spring.repository.TouristRepository">

    <sql id="SELECT_BASE">
        SELECT
        tour_id "tour_id"
        , title "title"
        , zipcode "zipcode"
        , addr1 "addr1"
        , areacode "areacode"
        , contentid "contentid"
        , contenttypeid "contenttypeid"
        , firstimage "firstimage"
        , mapx "mapx"
        , mapy "mapy"
        , sigungucode "sigungucode"
        , cat1 "cat1"
        , cat2 "cat2"
        , cat3 "cat3"



        FROM hot_tour_mysql
        WHERE 1 = 1
    </sql>

<!--관광지-->

    <insert id="saveOrUpdateTourist" flushCache="true" parameterType="com.lec.spring.domain.TouristData"
    useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql (title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
            ON DUPLICATE KEY UPDATE
                                 title = VALUES(title),
                                 zipcode = VALUES(zipcode),
                                 addr1 = VALUES(addr1),
                                 areacode = VALUES(areacode),
                                 contenttypeid = VALUES(contenttypeid),
                                 firstimage = VALUES(firstimage),
                                 mapx = VALUES(mapx),
                                 mapy = VALUES(mapy),
                                 sigungucode = VALUES(sigungucode),
                                 cat1 = VALUES(cat1),
                                 cat2 = VALUES(cat2),
                                 cat3 = VALUES(cat3);
    </insert>



    <select id="touristFindAll" flushCache="true" resultType="com.lec.spring.domain.TouristData">
        SELECT * FROM hot_tour_mysql WHERE areacode = #{areacode} AND contenttypeid = #{contenttypeid} ORDER BY tour_id DESC
            LIMIT #{limit} OFFSET #{offset}
    </select>
<!--    <select id="touristFindAll" flushCache="true" resultType="com.lec.spring.domain.TouristData">-->
<!--        SELECT  h.firstimage, h.title, h.addr1, r.tour_id-->
<!--        FROM hot_tour_mysql h, hot_tour_recommend r-->
<!--        where h.tour_id = r.tour_id AND h.areacode = #{areacode} AND h.contenttypeid = #{contenttypeid}-->
<!--        ORDER BY r.tour_id DESC-->
<!--        LIMIT #{limit} OFFSET #{offset}-->
<!--    </select>-->




    <insert id="saveOrUpdateCamping" flushCache="true" parameterType="com.lec.spring.domain.CampingData"
            useGeneratedKeys="true" keyProperty="camping_id" keyColumn="camping_id">
        INSERT INTO hot_camping (facltNm, intro, lctCl, induty, doNm, sigunguNm, addr1, mapX, mapY, tel, operPdCl, operDeCl, tourEraCl, firstImageUrl, posblFcltyCl, themaEnvrnCl, animalCmgCl, contentId)
        values (#{facltNm}, #{intro}, #{lctCl}, #{induty}, #{doNm}, #{sigunguNm}, #{addr1}, #{mapX}, #{mapY}, #{tel}, #{operPdCl}, #{operDeCl}, #{tourEraCl}, #{firstImageUrl}, #{posblFcltyCl}, #{themaEnvrnCl}, #{animalCmgCl}, #{contentId})
            ON DUPLICATE KEY UPDATE
                                 facltNm = values(facltNm),
                                 intro = values(intro),
                                 lctCl = values(lctCl),
                                 induty = values(induty),
                                 doNm = values(doNm),
                                 sigunguNm = values(sigunguNm),
                                 addr1 = values(addr1),
                                 mapX = values(mapX),
                                 mapY = values(mapY),
                                 tel = values(tel),
                                 operPdCl = values(operPdCl),
                                 operDeCl = values(operDeCl),
                                 tourEraCl = values(tourEraCl),
                                 firstImageUrl = values(firstImageUrl),
                                 posblFcltyCl = values(posblFcltyCl),
                                 themaEnvrnCl = values(themaEnvrnCl),
                                 animalCmgCl = values(animalCmgCl),
                                 contentId = values(contentId);


    </insert>

    <select id="countCampingData" resultType="int">
        SELECT count(*) FROM hot_camping
    </select>

    <select id="campingFindAll" flushCache="true" resultType="com.lec.spring.domain.CampingData">
        SELECT * FROM hot_camping ORDER BY camping_id DESC
            #         SELECT FROM hot_camping c , hot_tour_mysql t WHERE c.doNm = '서울' AND t.areacode = 1
            LIMIT #{limit} OFFSET #{offset}
    </select>





</mapper>


