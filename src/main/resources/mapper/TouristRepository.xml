<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lec.spring.repository.TouristRepository">

    <sql id="SELECT_BASE">
        SELECT
        tour_id "tour_id"
        , title "title"
        , zipcode "zipcode"
        , addr1 "addr1"
        , areacode "areacode"
        , contentid "contentid"
        , contenttypeid "contenttypeid"
        , firstimage "firstimage"
        , mapx "mapx"
        , mapy "mapy"
        , sigungucode "sigungucode"
        , cat1 "cat1"
        , cat2 "cat2"
        , cat3 "cat3"



        FROM hot_tour_mysql
        WHERE 1 = 1
    </sql>

<!--관광지-->

    <insert id="saveOrUpdateTourist" flushCache="true" parameterType="com.lec.spring.domain.TouristData"
    useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
            ON DUPLICATE KEY UPDATE
                                 title = VALUES(title),
                                 zipcode = VALUES(zipcode),
                                 addr1 = VALUES(addr1),
                                 areacode = VALUES(areacode),
                                 contenttypeid = VALUES(contenttypeid),
                                 firstimage = VALUES(firstimage),
                                 mapx = VALUES(mapx),
                                 mapy = VALUES(mapy),
                                 sigungucode = VALUES(sigungucode),
                                 cat1 = VALUES(cat1),
                                 cat2 = VALUES(cat2),
                                 cat3 = VALUES(cat3);
    </insert>

<!--음식점-->
    <insert id="saveOrUpdateRestaurant" flushCache="true" parameterType="com.lec.spring.domain.RestaurantData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
            ON DUPLICATE KEY UPDATE
                                 title = VALUES(title),
                                 zipcode = VALUES(zipcode),
                                 addr1 = VALUES(addr1),
                                 areacode = VALUES(areacode),
                                 contenttypeid = VALUES(contenttypeid),
                                 firstimage = VALUES(firstimage),
                                 mapx = VALUES(mapx),
                                 mapy = VALUES(mapy),
                                 sigungucode = VALUES(sigungucode),
                                 cat1 = VALUES(cat1),
                                 cat2 = VALUES(cat2),
                                 cat3 = VALUES(cat3);
    </insert>


<!--    문화시설-->
    <insert id="saveOrUpdateCultural" flushCache="true" parameterType="com.lec.spring.domain.CulturalData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
            ON DUPLICATE KEY UPDATE
                                 title = VALUES(title),
                                 zipcode = VALUES(zipcode),
                                 addr1 = VALUES(addr1),
                                 areacode = VALUES(areacode),
                                 contenttypeid = VALUES(contenttypeid),
                                 firstimage = VALUES(firstimage),
                                 mapx = VALUES(mapx),
                                 mapy = VALUES(mapy),
                                 sigungucode = VALUES(sigungucode),
                                 cat1 = VALUES(cat1),
                                 cat2 = VALUES(cat2),
                                 cat3 = VALUES(cat3);
    </insert>

<!--    축제행사-->
    <insert id="saveOrUpdateFestival" flushCache="true" parameterType="com.lec.spring.domain.FestivalData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
            ON DUPLICATE KEY UPDATE
                                 title = VALUES(title),
                                 zipcode = VALUES(zipcode),
                                 addr1 = VALUES(addr1),
                                 areacode = VALUES(areacode),
                                 contenttypeid = VALUES(contenttypeid),
                                 firstimage = VALUES(firstimage),
                                 mapx = VALUES(mapx),
                                 mapy = VALUES(mapy),
                                 sigungucode = VALUES(sigungucode),
                                 cat1 = VALUES(cat1),
                                 cat2 = VALUES(cat2),
                                 cat3 = VALUES(cat3);
    </insert>

<!--    레포츠-->
    <insert id="saveOrUpdateSports" flushCache="true" parameterType="com.lec.spring.domain.SportsData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
            ON DUPLICATE KEY UPDATE
                                 title = VALUES(title),
                                 zipcode = VALUES(zipcode),
                                 addr1 = VALUES(addr1),
                                 areacode = VALUES(areacode),
                                 contenttypeid = VALUES(contenttypeid),
                                 firstimage = VALUES(firstimage),
                                 mapx = VALUES(mapx),
                                 mapy = VALUES(mapy),
                                 sigungucode = VALUES(sigungucode),
                                 cat1 = VALUES(cat1),
                                 cat2 = VALUES(cat2),
                                 cat3 = VALUES(cat3);
    </insert>

<!--    숙박-->
    <insert id="saveOrUpdateLodgment" flushCache="true" parameterType="com.lec.spring.domain.LodgmentData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
            ON DUPLICATE KEY UPDATE
                                 title = VALUES(title),
                                 zipcode = VALUES(zipcode),
                                 addr1 = VALUES(addr1),
                                 areacode = VALUES(areacode),
                                 contenttypeid = VALUES(contenttypeid),
                                 firstimage = VALUES(firstimage),
                                 mapx = VALUES(mapx),
                                 mapy = VALUES(mapy),
                                 sigungucode = VALUES(sigungucode),
                                 cat1 = VALUES(cat1),
                                 cat2 = VALUES(cat2),
                                 cat3 = VALUES(cat3);
    </insert>


<!--    쇼핑-->
    <insert id="saveOrUpdateShopping" flushCache="true" parameterType="com.lec.spring.domain.ShoppingData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
            ON DUPLICATE KEY UPDATE
                                 title = VALUES(title),
                                 zipcode = VALUES(zipcode),
                                 addr1 = VALUES(addr1),
                                 areacode = VALUES(areacode),
                                 contenttypeid = VALUES(contenttypeid),
                                 firstimage = VALUES(firstimage),
                                 mapx = VALUES(mapx),
                                 mapy = VALUES(mapy),
                                 sigungucode = VALUES(sigungucode),
                                 cat1 = VALUES(cat1),
                                 cat2 = VALUES(cat2),
                                 cat3 = VALUES(cat3);
    </insert>


    <select id="touristFindAll" flushCache="true" resultType="com.lec.spring.domain.TouristData">
        SELECT firstimage, title FROM hot_tour_mysql WHERE areacode = #{areacode} AND contenttypeid = #{contenttypeid} ORDER BY tour_id DESC
            LIMIT #{limit} OFFSET #{offset}
    </select>
<!--    <select id="touristFindAll" flushCache="true" resultType="com.lec.spring.domain.TouristData">-->
<!--        SELECT  h.firstimage, h.title, h.addr1, r.tour_id-->
<!--        FROM hot_tour_mysql h, hot_tour_recommend r-->
<!--        where h.tour_id = r.tour_id AND h.areacode = #{areacode} AND h.contenttypeid = #{contenttypeid}-->
<!--        ORDER BY r.tour_id DESC-->
<!--        LIMIT #{limit} OFFSET #{offset}-->
<!--    </select>-->








    <select id="countTouristData" resultType="int">
        SELECT COUNT(*) FROM hot_tour_mysql
    </select>
    <select id="countRestauranData" resultType="int">
        SELECT COUNT(*) FROM hot_tour_mysql
    </select>
    <select id="countCulturalData" resultType="int">
        SELECT COUNT(*) FROM tour_mysql
    </select>
    <select id="countFestivalData" resultType="int">
        SELECT COUNT(*) FROM hot_tour_mysql
    </select>
    <select id="countSporttData" resultType="int">
        SELECT COUNT(*) FROM hot_tour_mysql
    </select>
    <select id="countLodgmentData" resultType="int">
        SELECT COUNT(*) FROM hot_tour_mysql
    </select>
    <select id="countShoppingData" resultType="int">
        SELECT COUNT(*) FROM hot_tour_mysql
    </select>
</mapper>


