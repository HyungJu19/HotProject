<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lec.spring.repository.TouristRepository">

    <sql id="SELECT_BASE">
        SELECT
            tour_id "tour_id"
             , title "title"
             , zipcode "zipcode"
             , addr1 "addr1"
             , areacode "areacode"
             , contentid "contentid"
             , contenttypeid "contenttypeid"
             , firstimage "firstimage"
             , mapx "mapx"
             , mapy "mapy"
             , sigungucode "sigungucode"
             , cat1 "cat1"
             , cat2 "cat2"
             , cat3 "cat3"



        FROM hot_tour_mysql
        WHERE 1 = 1
    </sql>

    <!--관광지-->

    <insert id="saveOrUpdateTourist" flushCache="true" parameterType="com.lec.spring.domain.TouristData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql (title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
        ON DUPLICATE KEY UPDATE
                             title = VALUES(title),
                             zipcode = VALUES(zipcode),
                             addr1 = VALUES(addr1),
                             areacode = VALUES(areacode),
                             contenttypeid = VALUES(contenttypeid),
                             firstimage = VALUES(firstimage),
                             mapx = VALUES(mapx),
                             mapy = VALUES(mapy),
                             sigungucode = VALUES(sigungucode),
                             cat1 = VALUES(cat1),
                             cat2 = VALUES(cat2),
                             cat3 = VALUES(cat3);
    </insert>


    <!--    투어서치결과-->
    <select id="touristFindAll" flushCache="true" resultType="com.lec.spring.domain.TouristData">
        SELECT
            count(r.tour_id) "count_tour",
            r.tour_id "tour_id",
            t.title "title",
            t.zipcode "zipcode",
            t.addr1 "addr1",
            t.areacode "areacode",
            t.contentid "contentid",
            t.contenttypeid "contenttypeid",
            t.firstimage "firstimage",
            t.mapx "mapx",
            t.mapy "mapy",
            t.sigungucode "sigungucode",
            t.cat1 "cat1",
            t.cat2 "cat2",
            t.cat3 "cat3",
            t.viewcnt "viewcnt"

        FROM hot_tour_mysql t, hot_tour_recommend r
        WHERE
            1 = 1
          AND t.tour_id = r.tour_id
          AND t.areacode = #{areacode}
          AND t.contenttypeid = #{contenttypeid}
        GROUP BY r.tour_id
        ORDER BY count_tour DESC
        LIMIT #{limit} OFFSET #{offset}
    </select>
    <!--    캠핑서치결과-->
    <select id="searchCampingFindAll" flushCache="true" resultType="com.lec.spring.domain.CampingData">
        SELECT
            count(r.camping_id) "count_camping",
            r.camping_id "camping_id",
            t.facltNm "facltNm",
            t.addr1 "addr1",
            t.induty "induty",
            t.lctCl "lctCl",
            t.doNm "area",
            t.sigunguNm "sigunguNm",
            t.intro "intro",
            t.mapX "mapX",
            t.mapY "mapY",
            t.tel "tel",
            t.operPdCl "operPdCl",
            t.operDeCl "operDeCl",
            t.tourEraCl "tourEraCl",
            t.firstImageUrl "firstImageUrl",
            t.posblFcltyCl "posblFcltyCl",
            t.themaEnvrnCl "themaEnvrnCl",
            t.animalCmgCl "animalCmgCl",
            t.camping_contentid "camping_contentid",
            t.viewcnt "viewcnt"

        FROM hot_camping t, hot_camping_recommendCount r
        WHERE
            1 = 1
          AND t.camping_id = r.camping_id
          AND t.doNm = #{doNm}

        GROUP BY r.camping_id
        ORDER BY count_camping DESC
        LIMIT #{limit} OFFSET #{offset}
    </select>
    <!--    <select id="touristFindAll" flushCache="true" resultType="com.lec.spring.domain.TouristData">-->
    <!--        SELECT  h.firstimage, h.title, h.addr1, r.tour_id-->
    <!--        FROM hot_tour_mysql h, hot_tour_recommend r-->
    <!--        where h.tour_id = r.tour_id AND h.areacode = #{areacode} AND h.contenttypeid = #{contenttypeid}-->
    <!--        ORDER BY r.tour_id DESC-->
    <!--        LIMIT #{limit} OFFSET #{offset}-->
    <!--    </select>-->


    <!--    투어카운트-->

    <select id="getTourAreacodeTotalCount" resultType="int">
        SELECT COUNT(*) FROM hot_tour_mysql WHERE areacode = #{areacode} AND contenttypeid = #{contenttypeid}

    </select>

    <select id="getConpingAreaTotalCount" resultType="int">
        SELECT COUNT(*) FROM hot_camping WHERE doNm = #{doNm};
    </select>

    <!--    <select id="countCampingData" resultType="int">-->
    <!--        SELECT count(*) FROM hot_camping WHERE doNm = #{area}-->
    <!--    </select>-->


    <!--캠핑 -->

    <insert id="saveOrUpdateCamping" flushCache="true" parameterType="com.lec.spring.domain.CampingData"
            useGeneratedKeys="true" keyProperty="camping_id" keyColumn="camping_id">
        INSERT INTO hot_camping (facltNm, intro, lctCl, induty, doNm, sigunguNm, addr1, mapX, mapY, tel, operPdCl, operDeCl, tourEraCl, firstImageUrl, posblFcltyCl, themaEnvrnCl, animalCmgCl, camping_contentid)
        values (#{facltNm}, #{intro}, #{lctCl}, #{induty}, #{doNm}, #{sigunguNm}, #{addr1}, #{mapX}, #{mapY}, #{tel}, #{operPdCl}, #{operDeCl}, #{tourEraCl}, #{firstImageUrl}, #{posblFcltyCl}, #{themaEnvrnCl}, #{animalCmgCl}, #{contentId})
        ON DUPLICATE KEY UPDATE
                             facltNm = values(facltNm),
                             intro = values(intro),
                             lctCl = values(lctCl),
                             induty = values(induty),
                             doNm = values(doNm),
                             sigunguNm = values(sigunguNm),
                             addr1 = values(addr1),
                             mapX = values(mapX),
                             mapY = values(mapY),
                             tel = values(tel),
                             operPdCl = values(operPdCl),
                             operDeCl = values(operDeCl),
                             tourEraCl = values(tourEraCl),
                             firstImageUrl = values(firstImageUrl),
                             posblFcltyCl = values(posblFcltyCl),
                             themaEnvrnCl = values(themaEnvrnCl),
                             animalCmgCl = values(animalCmgCl),
                             camping_contentid = values(camping_contentid);


    </insert>




    <!--음식점-->
    <insert id="saveOrUpdateRestaurant" flushCache="true" parameterType="com.lec.spring.domain.TouristData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
        ON DUPLICATE KEY UPDATE
                             title = VALUES(title),
                             zipcode = VALUES(zipcode),
                             addr1 = VALUES(addr1),
                             areacode = VALUES(areacode),
                             contenttypeid = VALUES(contenttypeid),
                             firstimage = VALUES(firstimage),
                             mapx = VALUES(mapx),
                             mapy = VALUES(mapy),
                             sigungucode = VALUES(sigungucode),
                             cat1 = VALUES(cat1),
                             cat2 = VALUES(cat2),
                             cat3 = VALUES(cat3);
    </insert>


    <!--    문화시설-->
    <insert id="saveOrUpdateCultural" flushCache="true" parameterType="com.lec.spring.domain.TouristData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
        ON DUPLICATE KEY UPDATE
                             title = VALUES(title),
                             zipcode = VALUES(zipcode),
                             addr1 = VALUES(addr1),
                             areacode = VALUES(areacode),
                             contenttypeid = VALUES(contenttypeid),
                             firstimage = VALUES(firstimage),
                             mapx = VALUES(mapx),
                             mapy = VALUES(mapy),
                             sigungucode = VALUES(sigungucode),
                             cat1 = VALUES(cat1),
                             cat2 = VALUES(cat2),
                             cat3 = VALUES(cat3);
    </insert>

    <!--    축제행사-->
    <insert id="saveOrUpdateFestival" flushCache="true" parameterType="com.lec.spring.domain.TouristData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
        ON DUPLICATE KEY UPDATE
                             title = VALUES(title),
                             zipcode = VALUES(zipcode),
                             addr1 = VALUES(addr1),
                             areacode = VALUES(areacode),
                             contenttypeid = VALUES(contenttypeid),
                             firstimage = VALUES(firstimage),
                             mapx = VALUES(mapx),
                             mapy = VALUES(mapy),
                             sigungucode = VALUES(sigungucode),
                             cat1 = VALUES(cat1),
                             cat2 = VALUES(cat2),
                             cat3 = VALUES(cat3);
    </insert>

    <!--    레포츠-->
    <insert id="saveOrUpdateSports" flushCache="true" parameterType="com.lec.spring.domain.TouristData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
        ON DUPLICATE KEY UPDATE
                             title = VALUES(title),
                             zipcode = VALUES(zipcode),
                             addr1 = VALUES(addr1),
                             areacode = VALUES(areacode),
                             contenttypeid = VALUES(contenttypeid),
                             firstimage = VALUES(firstimage),
                             mapx = VALUES(mapx),
                             mapy = VALUES(mapy),
                             sigungucode = VALUES(sigungucode),
                             cat1 = VALUES(cat1),
                             cat2 = VALUES(cat2),
                             cat3 = VALUES(cat3);
    </insert>

    <!--    숙박-->
    <insert id="saveOrUpdateLodgment" flushCache="true" parameterType="com.lec.spring.domain.TouristData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
        ON DUPLICATE KEY UPDATE
                             title = VALUES(title),
                             zipcode = VALUES(zipcode),
                             addr1 = VALUES(addr1),
                             areacode = VALUES(areacode),
                             contenttypeid = VALUES(contenttypeid),
                             firstimage = VALUES(firstimage),
                             mapx = VALUES(mapx),
                             mapy = VALUES(mapy),
                             sigungucode = VALUES(sigungucode),
                             cat1 = VALUES(cat1),
                             cat2 = VALUES(cat2),
                             cat3 = VALUES(cat3);
    </insert>


    <!--    쇼핑-->
    <insert id="saveOrUpdateShopping" flushCache="true" parameterType="com.lec.spring.domain.TouristData"
            useGeneratedKeys="true" keyProperty="id" keyColumn="tour_id">
        INSERT INTO hot_tour_mysql ( title,zipcode,addr1, areacode, contentid, contenttypeid, firstimage, mapx, mapy, sigungucode, cat1, cat2, cat3)
        VALUES (#{title},#{zipcode},#{addr1}, #{areacode}, #{contentid}, #{contenttypeid}, #{firstimage}, #{mapx}, #{mapy}, #{sigungucode}, #{cat1}, #{cat2}, #{cat3})
        ON DUPLICATE KEY UPDATE
                             title = VALUES(title),
                             zipcode = VALUES(zipcode),
                             addr1 = VALUES(addr1),
                             areacode = VALUES(areacode),
                             contenttypeid = VALUES(contenttypeid),
                             firstimage = VALUES(firstimage),
                             mapx = VALUES(mapx),
                             mapy = VALUES(mapy),
                             sigungucode = VALUES(sigungucode),
                             cat1 = VALUES(cat1),
                             cat2 = VALUES(cat2),
                             cat3 = VALUES(cat3);
    </insert>






    <!--    서치쿼리-->



    <select id="searchS" flushCache="true" resultType="string">

        SELECT * FROM hot_post WHERE subject LIKE '%검색어%'
        --         UNION
--         SELECT * FROM hot_schedule_info WHERE content_list_id LIKE '%검색어%' OR time LIKE '%검색어%' OR detail LIKE '%검색어%'
        UNION
        SELECT * FROM hot_tour_mysql WHERE title LIKE '%검색어%' OR addr1 LIKE '%검색어%' OR cat1 LIKE '%검색어%'
        UNION
        SELECT * FROM hot_camping WHERE facltNm LIKE '%검색어%' OR intro LIKE '%검색어%' OR induty LIKE '%검색어%'

    </select>



        <!--        SELECT * FROM-->
        <!--        hot_camping-->
        <!--        hot_tour_mysql-->
        <!--        hot_post-->
        <!--        hot_postcard-->
        <!--        hot_schedule_info-->
    <!--재환-->
    <select id="getCampingSpotsByInduty" resultType="com.lec.spring.domain.CampingData">
        SELECT firstImageUrl, facltNm, induty From hot_camping WHERE induty= #{induty};
    </select>

    <select id="campingFindAll" flushCache="true" resultType="com.lec.spring.domain.CampingData">
        SELECT * FROM hot_camping ORDER BY camping_id DESC
        LIMIT #{limit} OFFSET #{offset}
    </select>

    <!--재환-->



        <!--        SELECT * FROM-->
        <!--        hot_camping-->
        <!--        hot_tour_mysql-->
        <!--        hot_post-->
        <!--        hot_postcard-->
        <!--        hot_schedule_info-->


<!--            민호-->

    <select id="findBytourContentId" resultType="com.lec.spring.domain.TouristData">
        SELECT title, firstimage
        FROM hot_tour_mysql
        WHERE contentId = #{contentId}
    </select>



    <select id="findBytourdata" resultType="com.lec.spring.domain.TouristData">
        SELECT *
        FROM hot_tour_mysql
        WHERE contentid = #{contentid} AND contenttypeid = #{contenttypeid}
    </select>
</mapper>


