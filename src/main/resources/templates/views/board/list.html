<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


    <script src="https://kit.fontawesome.com/51772bd9bd.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script th:src="@{/JS/list.js}"></script>

    <title>목록</title>
</head>
<script>
    var url = new URL(window.location.href);
    var areaParam = url.searchParams.get("category");
    var areaTitle = document.getElementById("areaTitle");

    if (areaTitle) {
        areaTitle.style.opacity = 0; // 초기에 투명하게 설정
        var currentIndex = 0; // 현재 글자 인덱스

        // 이미 한 번 적용된 경우 다시 적용하지 않도록 처리
        if (!areaTitle.classList.contains("typed")) {

            // URL에서 추출한 값을 변경할 매핑
            var areaMapping = {
                "12": "관광지 게시판",
                "40": "캠핑 게시판",
                "39": "맛집 게시판",
                "32": "숙박 게시판",
                "38": "쇼핑 게시판",
                "28": "레포츠 게시판",
                "15": "축제 게시판",
                "14": "문화시설",
                // 추가적인 매핑을 필요에 따라 여기에 추가할 수 있습니다.
            };

            // areaParam을 변경된 값으로 설정
            areaParam = areaMapping[areaParam] || areaParam;

            // 한 글자씩 나오는 애니메이션을 적용하기 위한 함수
            function typeWriter() {
                if (currentIndex < areaParam.length) {
                    areaTitle.innerHTML += areaParam.charAt(currentIndex);
                    currentIndex++;
                    setTimeout(typeWriter, 200); // 글자 간의 시간 간격 (밀리초)
                } else {
                    // 모든 글자가 나타난 후 페이드 인 애니메이션 적용
                    fadeIn(areaTitle);
                }
            }
        }
    }
</script>
<body>
<th:block th:insert="~{fragments/header::header}"></th:block>
<a href="list?category=12&page=1">#관광</a>
<a href="list?category=40&page=1">#캠핑</a>
<a href="list?category=39&page=1">#맛집</a>
<a href="list?category=32&page=1">#숙박</a>
<a href="list?category=38&page=1">#쇼핑</a>
<a href="list?category=28&page=1">#레포츠</a>
<a href="list?category=15&page=1">#축제</a>
<a href="list?category=14&page=1">#문화시설</a>
<div class="container mt-3">
    <h2>목록</h2>
    <hr>

    <!-- 페이징 헤더 -->
    <div class="mb-3 mt-3 clearfix">
        <span class="float-start me-2">총 [[${cnt}]]개</span>
        <span class="float-start">page [[${page}]]/[[${totalPage}]]</span>
        <span class="float-end">
                <form name="frmPageRows">
                    <input type="hidden" name="page" th:value="${page}">
                    <select class="form-select" name="pageRows">
                        <option value="10" th:selected="${pageRows==10}">10</option>
                        <option value="15" th:selected="${pageRows==15}">15</option>
                        <option value="20" th:selected="${pageRows==20}">20</option>
                        <option value="50" th:selected="${pageRows==50}">50</option>
                    </select>
                </form>
            </span>
    </div>
     페이징 헤더


    <!-- 목록 -->
    <table class="table table-hover">
        <thead class="table-success">
        <tr>
            <th>#</th>
            <th>제목</th>
            <th>작성자</th>
            <th>조회수</th>
            <th>분류</th>
            <th>작성일</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="post : ${list}">
            <td><span th:text="${post.postId}"></span></td>
            <td><span><a th:href="@{'/board/detail/' + ${post.postId}}" th:text="${post.subject}"></a></span> </td>
            <td><span th:text="${post.user.username}"></span></td>
            <td><span th:text="${post.viewcnt}"></span></td>

            <td>
                <span th:if="${post.category == '40'}">캠핑</span>
                <span th:if="${post.category == '12'}">관광</span>
            </td>
            <td><span th:text="${#temporals.format(post.regDate, 'yyyy-MM-dd HH:mm:ss')}"></span></td>

        </tr>

        </tbody>
    </table>
    <!-- 목록 -->

    <div class="row">
        <div class="col-12">
            <a class="btn btn-outline-dark" th:href="@{/board/write}" sec:authorize="hasAnyRole('ADMIN', 'MEMBER')">작성</a>
        </div>
    </div>
</div>


<th:block th:insert="~{board/pagination::pagination}"></th:block>


</body>
</html>




















