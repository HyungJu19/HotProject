<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" th:href="@{/CSS/default.css}">
    <style>
        .image-container {
            width: 300px; /* 또는 다른 크기로 지정 */
            margin: 0 auto; /* 가운데 정렬을 위해 사용 */
        }
    </style>

    <title>캠핑여행</title>

</head>
<body>
<th:block th:insert="~{fragments/header::header}"></th:block>
<h1>캠핑여행</h1><hr><br>

<!-- 이미지를 보여주는 부분 -->
<div id="campingCarousel" class="carousel slide" data-bs-ride="carousel">
<h3>이달의 캠핑장</h3><br>
    <div class="carousel-inner">
        <div th:each="campingSpot, iterStat : ${campingSpots}" class="carousel-item" th:classappend="${iterStat.index == 0} ? 'active' : ''">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 mx-auto">
                        <div class="image-container">
                            <img th:src="${campingSpot.firstImageUrl}" class="d-block mx-auto img-fluid" alt="Camping Spot Image"/>
                            <h5 th:utext="${campingSpot.facltNm}" style="color: black" class="text-center mt-2"></h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#campingCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#campingCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<h3>#태그로 보는 캠핑장</h3><br>
<!-- 탭을 생성하는 부분 -->
<ul class="nav nav-tabs" id="campingTabs">
    <li class="nav-item">
        <a class="nav-link active" id="karavanTab" data-bs-toggle="tab" href="#karavan" onclick="loadCampingSpots('karavan')">카라반</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="glampingTab" data-bs-toggle="tab" href="#glamping" onclick="loadCampingSpots('glamping')">글램핑</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="campingTab" data-bs-toggle="tab" href="#camping" onclick="loadCampingSpots('camping')">일반야영장</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="autoCampingTab" data-bs-toggle="tab" href="#autoCamping" onclick="loadCampingSpots('autoCamping')">자동차야영장</a>
    </li>
</ul>

<!-- 탭에 대응하는 캠핑장을 보여주는 부분 -->
<div class="tab-content">
    <div class="tab-pane fade show active" id="karavan">
        <!-- 카라반 캠핑장을 보여주는 영역 -->
        gd
    </div>
    <div class="tab-pane fade" id="glamping">
        <!-- 글램핑 캠핑장을 보여주는 영역 -->
        hi
    </div>
    <div class="tab-pane fade" id="camping">
        <!-- 일반야영장을 보여주는 영역 -->
        asg
    </div>
    <div class="tab-pane fade" id="autoCamping">
        sadg
        <!-- 자동차야영장을 보여주는 영역 -->
    </div>
</div>
<script th:inline="javascript">
    function loadCampingSpots(induty) {
        fetch('/get-camping-spots-by-induty?induty=' + induty)
            .then(response => response.json())
            .then(data => {
                updatePageWithData(induty, data);
            })
            .catch(error => console.error('Error:', error));
    }

    function updatePageWithData(induty, data) {
        // 서버에서 받아온 데이터를 이용하여 동적으로 페이지 업데이트
        var tabContent = document.getElementById(induty);
        tabContent.innerHTML = '';  // 해당 탭의 내용 초기화

        // 받아온 데이터를 이용하여 이미지와 이름을 추가
        data.forEach(function(campingSpot) {
            var container = document.createElement('div');
            container.className = 'container';

            var row = document.createElement('div');
            row.className = 'row';

            var col = document.createElement('div');
            col.className = 'col-md-6 mx-auto';

            var imageContainer = document.createElement('div');
            imageContainer.className = 'image-container';

            var image = document.createElement('img');
            image.src = campingSpot.firstImageUrl;
            image.className = 'd-block mx-auto img-fluid';
            image.alt = 'Camping Spot Image';

            var name = document.createElement('h5');
            name.textContent = campingSpot.facltNm;
            name.style.color = 'black';
            name.className = 'text-center mt-2';

            imageContainer.appendChild(image);
            imageContainer.appendChild(name);
            col.appendChild(imageContainer);
            row.appendChild(col);
            container.appendChild(row);

            tabContent.appendChild(container);
        });
    }
</script>


}
</script>

<h3>캠핑 story</h3>

</body>
</html>